#!/bin/bash

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                   AVENUE DASHBOARD - API                       â•‘"
echo "â•‘            IntegraÃ§Ã£o Frontend - Backend (P&L Total)           â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ðŸ“¡ ENDPOINTS DISPONÃVEIS:"
echo ""
echo "   1. Health Check"
echo "      GET http://localhost:8000/api/health"
echo "      â†’ Verifica se servidor estÃ¡ rodando"
echo ""
echo "   2. P&L Total Agregado"
echo "      GET http://localhost:8000/api/pl/total"
echo "      â†’ Retorna P&L total de todos os 10 clientes"
echo "      â†’ PerÃ­odo: 01/12/2025 atÃ© 20/01/2026"
echo "      â†’ Formato: [{ date: '2025-12-01', value: 2411473.63 }, ...]"
echo ""
echo "   3. EstatÃ­sticas"
echo "      GET http://localhost:8000/api/pl/stats"
echo "      â†’ stats.max    : $3,476,468.98"
echo "      â†’ stats.min    : $2,411,473.63"
echo "      â†’ stats.average: $2,813,714.81"
echo "      â†’ stats.totalDays: 51"
echo "      â†’ stats.totalClients: 10"
echo ""
echo "ðŸ“Š CLIENTES INCLUSOS:"
echo ""
curl -s http://localhost:8000/api/pl/total 2>/dev/null | python3 -c "
import sys, json
try:
    data = json.load(sys.stdin)
    print('   âœ“ Dados carregados com sucesso!')
    print(f'   âœ“ Total de registros: {len(data[\"data\"])} dias')
    print(f'   âœ“ PerÃ­odo: {data[\"startDate\"]} atÃ© {data[\"endDate\"]}')
except:
    print('   âœ— Erro ao carregar dados')
" || echo "   âš  Servidor nÃ£o respondeu"
echo ""
echo "ðŸŽ¨ FRONTEND:"
echo ""
echo "   Componente: EvolutionChart.tsx"
echo "   LocalizaÃ§Ã£o: frontend/src/components/EvolutionChart.tsx"
echo "   Status: âœ… Integrado com API"
echo "   TÃ­tulo: Total de P&L"
echo "   Fonte: http://localhost:8000/api/pl/total"
echo ""
echo "ðŸš€ COMO RODAR:"
echo ""
echo "   Terminal 1 (Backend):"
echo "   $ bash run_backend.sh"
echo ""
echo "   Terminal 2 (Frontend):"
echo "   $ cd frontend && bun dev"
echo ""
echo "   Acessar: http://localhost:5173"
echo ""
